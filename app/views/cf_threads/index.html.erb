<%
render 'cf_messages/message_header'
render 'cf_threads/thread_tree'

content_for :title, current_forum.blank? ? t('threads.threadlist_all') : t('threads.threadlist', name: current_forum.name)
%>

<% @threads.each do |thread| %>
<article class="thread threadlist<% if thread.sticky %> sticky<% end %>">
  <%= message_header(thread, thread.message, first: true, show_icons: true) %>

  <% if not thread.message.messages.blank? and thread.attribs['open_state'] != 'closed' %>
  <%= message_tree(thread, thread.message.messages, show_icons: true) %>
  <% end %>
</article>

<% end %>

<%= render 'pages' %>
